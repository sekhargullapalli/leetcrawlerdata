!function(a,b,c,d,e,f){"use strict";function g(a){return a.events}function h(a){return function(b){return b&&b.slice(0,a)}}function i(a){return!(!a||!a.length)&&a.filter(function(a){if(!a)return!1;if(!a.status)return!1;switch(a.status){case"live":case"started":case"ended":case"completed":return!0;default:return!1}})}function j(a){var c=[];return!(!a||!a.length)&&(b.each(a,function(a){var d=null;a.ticket_classes&&a.ticket_classes.length&&(d=a.ticket_classes[0].sales_end);var f=e.create(a.name.text,a.start.utc,a.description.html,a.venue,d,a.status);f.signupInformation={id:a.id,status:a.status,ticket_classes:b.map(a.ticket_classes||[],k),url:a.url},c.push(f)}),c)}function k(a){var b=a.quantity_total-a.quantity_sold;return{id:a.id,name:a.name,remainingTickets:b,free:a.free,maxTicketCount:Math.min(10,b),fee:a.free?"Free":a.fee.display}}f.eventApi={getEvents:function(b){return a.getJSON("//web-api.tretton37.com/external/eventbrite").then(g).then(i).then(h(b)).then(j)}}}(window.jQuery,window._,window.ko,window.moment,window.eventFactory,window);